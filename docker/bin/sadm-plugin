#!/usr/bin/env python3

# Copyright (c) Jerem√≠as Casteglione <jrmsdev@gmail.com>
# See LICENSE file.

import sys
sys.path.insert(0, '/opt/src/sadm')

from os import path

from _sadm import log, env

def main():
	log.init('debug')
	pname = sys.argv[1]
	try:
		cfgfn = sys.argv[2]
	except IndexError:
		cfgfn = 'configure.ini'
	cfgfile = path.join('/etc/opt/sadm', pname, cfgfn)
	print('CFGFILE:', cfgfile)
	rc, _ = env.run('devel', 'docker', 'deploy', cfgfile = cfgfile)
	return rc

if __name__ == '__main__':
	sys.exit(main())
